{"version":3,"file":"catchshortcuts.min.js","sources":["../src/catchshortcuts.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Theme Boost Campus - JS code for catching pressed keys.\n *\n * @module     theme_boost_campus/catchshortcuts\n * @copyright  2017 Kathrin Osswald, Ulm University <kathrin.osswald@uni-ulm.de>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n    \"use strict\";\n\n    /**\n     * Initialising.\n     *\n     * @param {string} value\n     */\n    function initcatchshortcuts(value) {\n        if (value == 'end') {\n            // Catch the end key to be able to change the behavior.\n            $(document).keydown(function(e) {\n                if (e.keyCode == 35) {\n                    // Additionally check no active focus in form elements.\n                    if (checkForActiveFormElement() != true) {\n                        // Scroll only to the bottom of the course content.\n                        scrollToBottomOfCourse(e);\n                    }\n                }\n            });\n        }\n        // This shortcut is only relevant for users operating on MacOS.\n        if (navigator.appVersion.indexOf(\"Mac\") != -1 && value == 'cmdarrowdown') {\n            // Bind the cmd + arrow down shortcut to be able to change the behavior.\n            $(document).keydown(function(e) {\n                if (e.keyCode == 40 && e.metaKey) {\n                    // Additionally check no active focus in form elements.\n                    if (checkForActiveFormElement() != true) {\n                        // Scroll only to the bottom of the course content.\n                        scrollToBottomOfCourse(e);\n                    }\n                }\n            });\n        }\n        // This shortcut is only relevant for users operating on Windows.\n        if (navigator.appVersion.indexOf(\"Win\") != -1 && value == 'ctrlarrowdown') {\n            // Bind the ctrl + arrow down shortcut to be able to change the behavior.\n            $(document).keydown(function(e) {\n                if (e.keyCode == 40 && e.ctrlKey) {\n                    // Additionally check no active focus in form elements.\n                    if (checkForActiveFormElement() != true) {\n                        // Scroll only to the bottom of the course content.\n                        scrollToBottomOfCourse(e);\n                    }\n                }\n            });\n        }\n    }\n\n    /**\n     * Function to scroll only to the bottom of the course and not the bottom of the whole page.\n     *\n     * @param {object} event\n     */\n    function scrollToBottomOfCourse(event) {\n        // Prevent default behavior.\n        event.preventDefault();\n        // Scroll only to the bottom of the course content.\n        $('html, body').animate({\n            scrollTop: $('#page-footer').offset().top - $(window).height() + 50\n        }, 500);\n    }\n\n    /**\n     * Function to check for an active form element.\n     *\n     * @return {boolean}\n     */\n    function checkForActiveFormElement() {\n        // Get the active Element for the current page.\n        var activeElement = document.activeElement;\n        var returnvalue = false;\n        // Check if the given active element is type of input field, textarea or editable content.\n        if (activeElement.tagName == 'INPUT' || activeElement.tagName == 'TEXTAREA' || activeElement.isContentEditable == true) {\n            returnvalue = true;\n        }\n        return returnvalue;\n    }\n\n    return {\n        init: function(params) {\n            for (var i = 0, len = params.length; i < len; i++) {\n                initcatchshortcuts(params[i]);\n            }\n        }\n    };\n});\n"],"names":["define","$","scrollToBottomOfCourse","event","preventDefault","animate","scrollTop","offset","top","window","height","checkForActiveFormElement","activeElement","document","returnvalue","tagName","isContentEditable","init","params","i","len","length","value","keydown","e","keyCode","navigator","appVersion","indexOf","metaKey","ctrlKey"],"mappings":";;;;;;;AAuBAA,2CAAO,CAAC,WAAW,SAASC,YAsDfC,uBAAuBC,OAE5BA,MAAMC,iBAENH,EAAE,cAAcI,QAAQ,CACpBC,UAAWL,EAAE,gBAAgBM,SAASC,IAAMP,EAAEQ,QAAQC,SAAW,IAClE,cAQEC,gCAEDC,cAAgBC,SAASD,cACzBE,aAAc,QAEW,SAAzBF,cAAcG,SAA+C,YAAzBH,cAAcG,SAA4D,GAAnCH,cAAcI,oBACzFF,aAAc,GAEXA,kBAGJ,CACHG,KAAM,SAASC,YACN,IAAIC,EAAI,EAAGC,IAAMF,OAAOG,OAAQF,EAAIC,IAAKD,IAxErC,QADWG,MA0EGJ,OAAOC,KAvE9BlB,EAAEY,UAAUU,SAAQ,SAASC,GACR,IAAbA,EAAEC,SAEiC,GAA/Bd,6BAEAT,uBAAuBsB,OAMK,GAAxCE,UAAUC,WAAWC,QAAQ,QAAyB,gBAATN,OAE7CrB,EAAEY,UAAUU,SAAQ,SAASC,GACR,IAAbA,EAAEC,SAAiBD,EAAEK,SAEc,GAA/BlB,6BAEAT,uBAAuBsB,OAMK,GAAxCE,UAAUC,WAAWC,QAAQ,QAAyB,iBAATN,OAE7CrB,EAAEY,UAAUU,SAAQ,SAASC,GACR,IAAbA,EAAEC,SAAiBD,EAAEM,SAEc,GAA/BnB,6BAEAT,uBAAuBsB,UAlCfF"}