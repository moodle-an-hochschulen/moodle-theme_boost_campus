define(["jquery","core/ajax","core/notification","core/str","core/modal_factory","core/modal_events"],function(a,b,c,d,e,f){var g,h,i,j,k={HEADER:"#page-header .header-body",HEADER_TOP:"#page-header .page-head",HDRSTYLEA_BTN:"#hdr_chooser_a",HDRSTYLEB_BTN:"#hdr_chooser_b"},l=function(b,c,d){g=a(b),h=c,i=d},m=function(){g.on("click",k.HDRSTYLEA_BTN,n),g.on("click",k.HDRSTYLEB_BTN,n)},n=function(){j=a(this),e.create({type:e.types.SAVE_CANCEL,title:"Change Style",body:"Are you sure you want to change the header style?"}).then(function(a){a.setSaveButtonText("Change");var b=a.getRoot();b.on(f.cancel,function(){}),b.on(f.save,o),a.show()})},o=function(){if("#"+j.attr("id")==k.HDRSTYLEB_BTN){if(a(k.HDRSTYLEB_BTN).hasClass("btn-success"))return;i=1,a(k.HDRSTYLEA_BTN).removeClass("btn-success"),a(k.HDRSTYLEB_BTN).addClass("btn-success"),bkgimg=a("#hdr_chooser_a_div img").attr("src"),a("#hdr_chooser_a_div").addClass("d-none"),a("#hdr_chooser_b_div").removeClass("style-a"),_changed=1}else{if(a(k.HDRSTYLEA_BTN).hasClass("btn-success"))return;i=0,a(k.HDRSTYLEB_BTN).removeClass("btn-success"),a(k.HDRSTYLEA_BTN).addClass("btn-success"),a("#hdr_chooser_a_div").removeClass("d-none"),a("#hdr_chooser_b_div").addClass("style-a"),_changed=1}if(h){var d={courseid:h,headerstyle:i},e={methodname:"theme_urcourses_default_header_choose_style",args:d,done:p,fail:c.exception};b.call([e])}},p=function(){d.get_string("success:coursestylechosen","theme_urcourses_default").done(q)},q=function(b){var c=a("<div></div>");c.text(b),c.css({position:"absolute"}),c.css({right:"5px"}),c.css({"z-index":"1200"}),c.addClass("alert alert-success alert-dismissable fade show");var d=a("<button></button>");d.html("&times;"),d.addClass("close"),d.attr("type","button"),d.attr("data-dismiss","alert"),c.append(d),a(k.HEADER_TOP).append(c),setTimeout(function(){a("div.alert.alert-success.alert-dismissable.fade.show").alert("close")},1800)},r=function(a,b,c){l(a,b,c),m()};return{init:r}});