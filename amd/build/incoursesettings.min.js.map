{"version":3,"file":"incoursesettings.min.js","sources":["../src/incoursesettings.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Theme Boost Campus - JS code for displaying course setting within the course.\n *\n * @module     theme_boost_campus/incoursesettings\n * @copyright  2017 Kathrin Osswald, Ulm University <kathrin.osswald@uni-ulm.de>\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine(['jquery'], function($) {\n    \"use strict\";\n\n    /**\n     * Initialising.\n     */\n    function initInCourseSettings() {\n        var frontpage = $('body').hasClass('pagelayout-frontpage');\n\n        // Only change the behaviour if the setting is enabled and we are not on the frontpage,\n        // because we did not change the settings menu there. So we need the default propagation here.\n        if (!frontpage) {\n\n            var courseSettings = $('#boost-campus-course-settings');\n            var activitySettings = $('#boost-campus-activity-settings');\n            var headerCardBorderBottom = $('#page-header .card').css(\"border-bottom\");\n            var courseSettingsDropdownToggle = $('#page-header .context-header-settings-menu .dropdown-toggle');\n            var activitySettingsDropdownToggle = $('#region-main-settings-menu .action-menu .dropdown-toggle');\n\n            // Remove attribute aria-haspopup because we are replacing this with the in-course course settings and\n            // set the new in-course course settings for the aria-controls attribute\n            courseSettingsDropdownToggle.removeAttr('aria-haspopup').attr('aria-controls', 'boost-campus-course-settings');\n\n            // Remove attribute aria-haspopup because we are replacing this with the in-course activity settings\n            // set the new in-course activity settings for the aria-controls attribute\n            activitySettingsDropdownToggle.removeAttr('aria-haspopup').attr('aria-controls', 'boost-campus-activity-settings');\n\n            courseSettingsDropdownToggle.on('click', function(event) {\n                event.stopPropagation();\n                if (courseSettings.is(\":visible\")) {\n                    courseSettings.hide(400);\n                    courseSettingsDropdownToggle.attr('aria-expanded', 'false');\n                    setTimeout(function() {\n                        $('#page-header .card').css('border-bottom', headerCardBorderBottom);\n                        $('#page-header > div').addClass('pb-3');\n                    }, 300);\n                } else {\n                    courseSettings.show(400);\n                    $('#page-header div').removeClass('pb-3');\n                    $('#page-header .card').css('border-bottom', 'none');\n                    courseSettings.css('border-top', 'none');\n                    courseSettingsDropdownToggle.attr('aria-expanded', 'true');\n                    // Additionally close activity settings if they are currently open.\n                    if (activitySettings.is(\":visible\")) {\n                        activitySettings.hide(400);\n                        activitySettingsDropdownToggle.attr('aria-expanded', 'false');\n                    }\n                }\n            });\n            activitySettingsDropdownToggle.on('click', function(event) {\n                event.stopPropagation();\n                if (activitySettings.is(\":visible\")) {\n                    activitySettings.hide(400);\n                    activitySettingsDropdownToggle.attr('aria-expanded', 'false');\n                } else {\n                    activitySettings.show(400);\n                    activitySettingsDropdownToggle.attr('aria-expanded', 'true');\n                    setTimeout(function() {\n                        $('#page-header .card').css('border-bottom', headerCardBorderBottom);\n                        $('#page-header > div').addClass('pb-3');\n                    }, 300);\n                    // Additionally close course settings if they are currently open.\n                    if (courseSettings.is(\":visible\")) {\n                        courseSettings.hide(400);\n                        courseSettingsDropdownToggle.attr('aria-expanded', 'false');\n                    }\n                }\n            });\n        }\n    }\n\n    return {\n        init: function() {\n            initInCourseSettings();\n        }\n    };\n});\n"],"names":["define","$","init","hasClass","courseSettings","activitySettings","headerCardBorderBottom","css","courseSettingsDropdownToggle","activitySettingsDropdownToggle","removeAttr","attr","on","event","stopPropagation","is","hide","setTimeout","addClass","show","removeClass","initInCourseSettings"],"mappings":";;;;;;;AAuBAA,6CAAO,CAAC,WAAW,SAASC,SAuEjB,CACHC,KAAM,2BAjEUD,EAAE,QAAQE,SAAS,wBAInB,KAERC,eAAiBH,EAAE,iCACnBI,iBAAmBJ,EAAE,mCACrBK,uBAAyBL,EAAE,sBAAsBM,IAAI,iBACrDC,6BAA+BP,EAAE,+DACjCQ,+BAAiCR,EAAE,4DAIvCO,6BAA6BE,WAAW,iBAAiBC,KAAK,gBAAiB,gCAI/EF,+BAA+BC,WAAW,iBAAiBC,KAAK,gBAAiB,kCAEjFH,6BAA6BI,GAAG,SAAS,SAASC,OAC9CA,MAAMC,kBACFV,eAAeW,GAAG,aAClBX,eAAeY,KAAK,KACpBR,6BAA6BG,KAAK,gBAAiB,SACnDM,YAAW,WACPhB,EAAE,sBAAsBM,IAAI,gBAAiBD,wBAC7CL,EAAE,sBAAsBiB,SAAS,UAClC,OAEHd,eAAee,KAAK,KACpBlB,EAAE,oBAAoBmB,YAAY,QAClCnB,EAAE,sBAAsBM,IAAI,gBAAiB,QAC7CH,eAAeG,IAAI,aAAc,QACjCC,6BAA6BG,KAAK,gBAAiB,QAE/CN,iBAAiBU,GAAG,cACpBV,iBAAiBW,KAAK,KACtBP,+BAA+BE,KAAK,gBAAiB,cAIjEF,+BAA+BG,GAAG,SAAS,SAASC,OAChDA,MAAMC,kBACFT,iBAAiBU,GAAG,aACpBV,iBAAiBW,KAAK,KACtBP,+BAA+BE,KAAK,gBAAiB,WAErDN,iBAAiBc,KAAK,KACtBV,+BAA+BE,KAAK,gBAAiB,QACrDM,YAAW,WACPhB,EAAE,sBAAsBM,IAAI,gBAAiBD,wBAC7CL,EAAE,sBAAsBiB,SAAS,UAClC,KAECd,eAAeW,GAAG,cAClBX,eAAeY,KAAK,KACpBR,6BAA6BG,KAAK,gBAAiB,eAS/DU"}